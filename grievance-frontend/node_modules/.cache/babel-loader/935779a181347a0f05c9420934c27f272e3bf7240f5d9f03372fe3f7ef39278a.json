{"ast":null,"code":"var _jsxFileName = \"D:\\\\coding\\\\grievance-frontend\\\\src\\\\pages\\\\HomePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport api from '../api';\nimport GrievanceForm from '../components/GrievanceForm';\nimport UpdateForm from '../components/UpdateForm'; // <-- Import UpdateForm\nimport '../App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [grievances, setGrievances] = useState([]);\n  const [editingId, setEditingId] = useState(null); // <-- State for edit mode\n\n  const fetchGrievances = () => {\n    axios.get('http://127.0.0.1:8000/api/grievances/').then(response => {\n      setGrievances(response.data);\n    }).catch(error => {\n      console.error(\"There was an error fetching the grievances!\", error);\n    });\n  };\n  useEffect(() => {\n    fetchGrievances();\n  }, []);\n  const handleDelete = id => {\n    axios.delete(`http://127.0.0.1:8000/api/grievances/${id}/`).then(() => {\n      fetchGrievances();\n    }).catch(error => {\n      console.error(\"There was an error deleting the grievance!\", error);\n    });\n  };\n\n  // --- NEW ---\n  const handleUpdate = () => {\n    setEditingId(null); // Exit edit mode\n    fetchGrievances(); // Refresh the list\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(GrievanceForm, {\n        onGrievanceCreated: fetchGrievances\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        style: {\n          width: '80%',\n          margin: '40px 0'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Grievance List\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: grievances.map(grievance => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            border: '1px solid white',\n            margin: '10px',\n            padding: '10px'\n          },\n          children: editingId === grievance.id ?\n          /*#__PURE__*/\n          // If in edit mode, show the UpdateForm\n          _jsxDEV(UpdateForm, {\n            grievance: grievance,\n            onUpdate: handleUpdate,\n            onCancel: () => setEditingId(null)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 17\n          }, this) :\n          /*#__PURE__*/\n          // Otherwise, show the normal display\n          _jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: grievance.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: grievance.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Status: \", grievance.status]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setEditingId(grievance.id),\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleDelete(grievance.id),\n              style: {\n                marginLeft: '10px',\n                backgroundColor: 'darkred',\n                color: 'white'\n              },\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 17\n          }, this)\n        }, grievance.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"frgJAQ0SHnyYnpXBslcWjsedl+4=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","api","GrievanceForm","UpdateForm","jsxDEV","_jsxDEV","App","_s","grievances","setGrievances","editingId","setEditingId","fetchGrievances","axios","get","then","response","data","catch","error","console","handleDelete","id","delete","handleUpdate","className","children","onGrievanceCreated","fileName","_jsxFileName","lineNumber","columnNumber","style","width","margin","map","grievance","border","padding","onUpdate","onCancel","title","description","status","onClick","marginLeft","backgroundColor","color","_c","$RefreshReg$"],"sources":["D:/coding/grievance-frontend/src/pages/HomePage.js"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport api from '../api';\r\nimport GrievanceForm from '../components/GrievanceForm';\r\nimport UpdateForm from '../components/UpdateForm'; // <-- Import UpdateForm\r\nimport '../App.css';\r\n\r\n\r\nfunction App() {\r\n  const [grievances, setGrievances] = useState([]);\r\n  const [editingId, setEditingId] = useState(null); // <-- State for edit mode\r\n\r\n  const fetchGrievances = () => {\r\n    axios.get('http://127.0.0.1:8000/api/grievances/')\r\n      .then(response => {\r\n        setGrievances(response.data);\r\n      })\r\n      .catch(error => {\r\n        console.error(\"There was an error fetching the grievances!\", error);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchGrievances();\r\n  }, []);\r\n\r\n  const handleDelete = (id) => {\r\n    axios.delete(`http://127.0.0.1:8000/api/grievances/${id}/`)\r\n      .then(() => {\r\n        fetchGrievances();\r\n      })\r\n      .catch(error => {\r\n        console.error(\"There was an error deleting the grievance!\", error);\r\n      });\r\n  };\r\n\r\n  // --- NEW ---\r\n  const handleUpdate = () => {\r\n    setEditingId(null); // Exit edit mode\r\n    fetchGrievances();  // Refresh the list\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <GrievanceForm onGrievanceCreated={fetchGrievances} />\r\n        <hr style={{ width: '80%', margin: '40px 0' }} />\r\n        <h1>Grievance List</h1>\r\n        <div>\r\n          {grievances.map(grievance => (\r\n            <div key={grievance.id} style={{ border: '1px solid white', margin: '10px', padding: '10px' }}>\r\n              { editingId === grievance.id ? (\r\n                // If in edit mode, show the UpdateForm\r\n                <UpdateForm \r\n                  grievance={grievance} \r\n                  onUpdate={handleUpdate} \r\n                  onCancel={() => setEditingId(null)} \r\n                />\r\n              ) : (\r\n                // Otherwise, show the normal display\r\n                <div>\r\n                  <h2>{grievance.title}</h2>\r\n                  <p>{grievance.description}</p>\r\n                  <p>Status: {grievance.status}</p>\r\n                  <button onClick={() => setEditingId(grievance.id)}>Edit</button>\r\n                  <button onClick={() => handleDelete(grievance.id)} style={{ marginLeft: '10px', backgroundColor: 'darkred', color: 'white' }}>\r\n                    Delete\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </header>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}